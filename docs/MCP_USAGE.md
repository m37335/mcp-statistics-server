# MCPの正しい使い方

## 結論：通常は「MCPツールをクライアントから呼ぶ」が正しい

このプロジェクトは **MCPサーバー** です。正しい使い方は次のとおりです。

1. **Cursor や Claude Desktop など MCP クライアント** でこのサーバーを設定する
2. **チャットで自然言語** で依頼する（例：「e-Statで空き家のデータを取得して」「日本の人口推移をグラフにして」）
3. **AI が MCP のツールを呼び出す**（`estat_get_data` や `generate_chart` など）
4. サーバーが実行し、結果がチャットに返る

**毎回スクリプトを書いたり、`node xxx.js` を手で実行する必要はありません。**

---

## このサーバーが提供するツール（主なもの）

| ツール名 | 用途 |
|----------|------|
| `estat_search_stats` | e-Statで統計表を検索 |
| `estat_get_data` | e-Statから統計データを取得 |
| `worldbank_get_indicator` | World Bankから指標データを取得 |
| `generate_chart` | データからチャート（SVG）を生成 |
| `export_data` | CSV/JSONでデータを出力（専門ツール用） |
| `calculate_statistics` | 基本統計量を計算 |

チャットで「〇〇のデータを取って」「△△のグラフを描いて」と書けば、AI が上記ツールを組み合わせて実行します。

---

## スクリプト（`scripts/` やルートの .js）の位置づけ

リポジトリにある `fetch-xxx.js` や `create-vacancy-charts.js` などは、**MCP の本来の使い方とは別**です。

- **用途**
  - 開発・デバッグ（API の挙動確認）
  - クライアントを使わない一括処理・バッチ
  - 「こういうデータ・グラフが欲しい」のサンプル
- **通常の利用では不要**
  - 普段は Cursor のチャットで「空き家データを取得して」「推移のグラフを描いて」と頼み、MCP ツール経由で実行すればよい

必要に応じて、こうしたスクリプトは `scripts/` にまとめ、README で「オプションのユーティリティ」と書いておくのがおすすめです。

---

## 使い方の例（MCP が正しい場合）

### 例1: 空き家データの取得

**チャットで：**
> e-Statから統計表ID「0004025681」の空き家データを取得してください

**AI が行うこと：**  
`estat_get_data` を `statsDataId: "0004025681"` で呼び出し、結果を要約して返す。

### 例2: 人口推移のグラフ

**チャットで：**
> 日本の人口推移（2000〜2023年）の折れ線グラフを作成して

**AI が行うこと：**  
`generate_chart` を `dataSource: "worldbank"`, `indicatorCode: "SP.POP.TOTL"` などで呼び出し、SVG を返す（または dataUri で表示）。

### 例3: データをCSVで欲しい

**チャットで：**
> 上記の人口データをCSV形式でエクスポートして

**AI が行うこと：**  
`export_data` を `format: "csv"` で呼び出し、CSV 文字列を返す。

---

## まとめ

| やり方 | 用途 |
|--------|------|
| **チャット + MCP ツール** | 通常の利用。データ取得・グラフ・集計はここでやる |
| **node scripts/xxx.js** | 開発・検証・バッチ・サンプル用。必須ではない |

「整理する」なら、**メインは MCP ツールで完結させ、スクリプトは補助（examples/scripts）にまとめる**形にするのがよいです。
